import{a as $,b as H}from"./chunk-STJ7I6BT.js";import{a as A}from"./chunk-SQY326CE.js";import"./chunk-O3NBZHTB.js";import{e as B,f as R,w as V,x as Q,z as N}from"./chunk-WWDSCM5Q.js";import{Ab as T,Bb as L,Db as j,Ka as x,Ra as s,Sa as S,Wb as F,Xb as q,_a as l,da as k,db as g,dc as b,eb as C,fb as i,fc as f,gb as a,ha as w,hb as m,ia as y,ib as v,jb as M,kb as D,nb as u,ob as h,rb as E,sb as p,tb as _,ub as I,vb as z,yb as U,zb as O}from"./chunk-KIWFM5SP.js";import"./chunk-JMZ7DUBM.js";var K=["search"];function X(n,c){if(n&1){let o=D();i(0,"div",13),u("click",function(){w(o);let t=h();return y(t.isOpenedUserDetails=!1)}),a(),m(1,"app-user-details",14)}if(n&2){let o=h();s(1),l("userData",o.userData)}}function Y(n,c){n&1&&(i(0,"div",17)(1,"div",18),m(2,"div",19)(3,"div",20),a()())}var W=n=>["/messenger/chat",n];function Z(n,c){if(n&1&&(i(0,"div",22),m(1,"img",23),i(2,"div",24)(3,"h2"),p(4),a(),i(5,"p"),p(6),a()()()),n&2){let o=h().$implicit;l("routerLink",O(5,W,o.id)),s(1),l("src",o.avatar,x)("alt","avatar "+o.name),s(3),_(o.name),s(2),_(o.bio)}}function tt(n,c){if(n&1&&(v(0),g(1,Z,7,7,"div",21),M()),n&2){let o=c.$implicit,r=h(2);s(1),l("ngIf",r.tokenUser.id!==o.id)}}function et(n,c){if(n&1&&(i(0,"div",15),g(1,Y,4,0,"div",16)(2,tt,2,1,"ng-container",12),a()),n&2){let o=h(),r=E(13);s(1),C(1,o.searchData.length==0&&r.value!=""?1:-1),s(1),l("ngForOf",o.searchData)}}function nt(n,c){if(n&1&&(i(0,"div",26),m(1,"img",27),i(2,"div")(3,"div")(4,"h3"),p(5),a(),i(6,"p"),p(7),a()(),i(8,"p"),p(9),a()()()),n&2){let o=h(),r=o.$implicit,t=o.index,e=h();l("routerLink",O(5,W,r.id)),s(1),l("src",r.avatar,x),s(4),_(r.name),s(2),I(" ",e.chatsData[t].messages[e.chatsData[t].messages.length-1].date.hours+":"+e.chatsData[t].messages[e.chatsData[t].messages.length-1].date.minutes,""),s(2),_(e.chatsData[t].messages[e.chatsData[t].messages.length-1].message)}}function it(n,c){if(n&1&&(v(0),g(1,nt,10,7,"div",25),M()),n&2){let o=c.$implicit;s(1),l("ngIf",o!=null)}}var ft=(()=>{let c=class c{constructor(r){this.reqService=r,this.isOpenedSearchBlock=!1,this.aiLastMessage="loading...",this.chatsData=[],this.token=localStorage.getItem("token"),this.isOpenedUserDetails=!1,this.userData={avatar:"./assets/images/load/load.jpg",name:"loading name...",email:"loading email...",bio:"loading biography...",l_name:"loading last name..."},this.searchData=[],this.chatUsersData=[],this.innerWidth=innerWidth}ngOnInit(){let r={token:this.token};this.reqService.post(f.aiGetChat,{token:this.token}).subscribe(t=>{t.messages[t.messages.length-1].message.length>25?this.aiLastMessage=t.messages[t.messages.length-1].message.slice(0,24)+"...":this.aiLastMessage=t.messages[t.messages.length-1].message}),this.reqService.post(f.getUserByToken,r).subscribe(t=>{this.tokenUser=t,this.userData=t}),this.reqService.post(f.getActiveChats,r).subscribe(t=>{t.forEach(e=>{e&&this.chatsData.push(e)}),t.forEach((e,d)=>{e&&e.usersId.forEach(P=>{if(this.userData.id!=P){let G={id:P,token:this.token};this.reqService.post(f.getUserById,G).subscribe(J=>{this.chatUsersData.push(J)})}})})})}searchValue(){let r={name:this.input?.nativeElement.value.split("").filter(t=>t.trim().length).join("")};this.reqService.post(f.search,r).subscribe(t=>{this.searchData=t})}};c.\u0275fac=function(t){return new(t||c)(S(b))},c.\u0275cmp=k({type:c,selectors:[["app-chats-menu"]],viewQuery:function(t,e){if(t&1&&L(K,5),t&2){let d;T(d=j())&&(e.input=d.first)}},standalone:!0,features:[z([b]),U],decls:27,vars:7,consts:[["appResizeHeight","",1,"main-div",3,"size"],[1,"box"],[1,"header_box"],[1,"user_img_box",3,"click"],["alt","user image",3,"src","title"],[1,"search_box",3,"mouseleave","click"],[1,"search_icon"],["placeholder","Type your search...","type","text",1,"search",3,"focus","input"],["search",""],["class","search_list_block"],[1,"chat_block"],["routerLink","/messenger/ai",1,"ai_chat"],[4,"ngFor","ngForOf"],[2,"position","absolute","left","0","top","0","height","100vh","width","100%","z-index","998","background-color","rgba(0,0,0,0.34)",3,"click"],[3,"userData"],[1,"search_list_block"],["class","loading_list"],[1,"loading_list"],[1,"list",2,"margin-top","20px"],[2,"width","50px","height","50px","border-radius","50%","background-color","#2a2a2a"],[2,"margin-left","20px","width","70%","height","20px","border-radius","5px","background-color","#2a2a2a"],["style","margin-top: 20px","class","list",3,"routerLink",4,"ngIf"],[1,"list",2,"margin-top","20px",3,"routerLink"],[3,"src","alt"],[2,"margin-left","20px"],["routerLinkActive","active-chat","class","chat",3,"routerLink",4,"ngIf"],["routerLinkActive","active-chat",1,"chat",3,"routerLink"],["alt","chat",3,"src"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),p(4,"Messages"),a(),i(5,"div",3),u("click",function(){return e.isOpenedUserDetails=!e.isOpenedUserDetails}),m(6,"img",4),a()(),g(7,X,2,1),i(8,"div",5),u("mouseleave",function(){return e.isOpenedSearchBlock=!1})("click",function(){return e.isOpenedSearchBlock=!0}),i(9,"label")(10,"mat-icon",6),p(11,"search"),a(),i(12,"input",7,8),u("focus",function(){return e.isOpenedSearchBlock=!0})("input",function(){return e.searchValue()}),a()(),g(14,et,3,2,"div",9),a()(),i(15,"div",10)(16,"h3"),p(17,"Chat"),a(),i(18,"div",11)(19,"mat-icon"),p(20,"auto_awesome"),a(),i(21,"div")(22,"h3"),p(23,"Flash Ai"),a(),i(24,"p"),p(25),a()()(),g(26,it,2,1,"ng-container",12),a()()),t&2&&(l("size",1),s(6),l("src",e.userData.avatar,x)("title",e.userData.name),s(1),C(7,e.isOpenedUserDetails?7:-1),s(7),C(14,e.isOpenedSearchBlock?14:-1),s(11),_(e.aiLastMessage),s(1),l("ngForOf",e.chatUsersData))},dependencies:[A,F,q,B,$,H,N,R,Q,V],styles:['.main-div[_ngcontent-%COMP%]{background:rgb(24 24 24);width:100%}.main-div[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.list[_ngcontent-%COMP%]{padding:10px;background-color:#3d3d3d;border-radius:10px;display:flex;align-items:center;border:1px solid rgba(255,255,255,.13)}.search_list_block[_ngcontent-%COMP%]{width:100%;padding:0 20px 20px;box-shadow:#00000012 0 3px 6px,#00000021 0 3px 6px;position:absolute;top:35px;background-color:#232323;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.list[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:50%}.list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#fff}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#000;padding:24px;flex-direction:column;border-bottom-right-radius:32px;border-bottom-left-radius:32px}.side-icon[_ngcontent-%COMP%]{width:30px;height:30px}.search[_ngcontent-%COMP%]{outline:none;height:15px;border:none;font-family:Poppins;color:#fff;font-size:14px;font-weight:500;line-height:21px;text-align:left;padding:25px 25px 25px 62px;width:100%;transition:.3s;border-radius:100px;background:rgb(24 24 24)}.search[_ngcontent-%COMP%]:focus{box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px;border-color:#039}app-user-details[_ngcontent-%COMP%]{box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px;width:250px;height:100%;position:absolute;top:0;right:0;z-index:999}.user_img_box[_ngcontent-%COMP%]{width:45px;height:45px;background-color:#000;border:2px solid rgb(0,80,239);top:20px;right:20px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;padding:24px;transition:.2s}.user_img_box[_ngcontent-%COMP%]:active{scale:.95}.user_img_box[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border-radius:50%}.chat_block[_ngcontent-%COMP%]{padding:32px 25px 25px}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;transition:.2s scale;outline:none;margin-top:15px}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%]{margin-top:17px;width:100%;display:flex;align-items:center;transition:.2s scale;outline:none}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#003aff;width:40px;height:40px;font-size:40px;background:linear-gradient(to left,#003aff,#ff00fb);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:25px;margin-left:20px;background:linear-gradient(to left,#003aff,#ff00fb);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:14px;font-weight:600;line-height:21px;text-align:left;margin-left:20px}.active-chat.active-chat.active-chat[_ngcontent-%COMP%]{background:rgb(68,68,68);border:1px solid rgba(255,255,255,.28);scale:1.02}.active-chat.active-chat.active-chat[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:30px;height:30px;background-color:#444;border-top-right-radius:6px;rotate:45deg;right:-10px}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:16px;width:100%}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:12px;font-weight:500;line-height:18px;text-align:left}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:14px;font-weight:600;line-height:21px;text-align:left}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:12px;font-weight:500;line-height:18px;text-align:left}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:cover;border-radius:50%;display:block}.search_box[_ngcontent-%COMP%]{position:relative;width:100%}.search_icon[_ngcontent-%COMP%]{color:#d7d7d796;width:26px;height:26px;font-size:26px;position:absolute;top:14px;left:24px}@media screen and (max-width: 520px){.search[_ngcontent-%COMP%]{width:100%}}.header_box[_ngcontent-%COMP%]{width:100%;margin:56px 0 32px;display:flex;align-items:center;justify-content:space-between}.header_box[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{color:#fff}.chat_block[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:16px;font-weight:600;line-height:24px}']});let n=c;return n})();export{ft as ChatsMenuComponent};
