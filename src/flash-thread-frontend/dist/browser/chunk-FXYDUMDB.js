import{a as J}from"./chunk-FRIJOY76.js";import{b as A}from"./chunk-F5I7DCU5.js";import{a as y,c as f}from"./chunk-HODLTFWJ.js";import{K as L,L as z,M as N,N as P,P as H,Q as q,R as j,S as I,T as C,U as R,V as G,W as B,X as U,Y,h as T,m as F}from"./chunk-EKEATKT6.js";import{Cb as D,Na as O,Va as a,Wa as w,cb as p,db as V,fa as k,hb as h,ib as c,ja as _,jb as t,ka as u,kb as i,lb as d,ob as v,rb as g,sb as S,vb as b,wb as o,zb as E}from"./chunk-MYIS5EFB.js";import"./chunk-JMZ7DUBM.js";function W(r,s){r&1&&d(0,"app-main-loader",26)}function X(r,s){r&1&&(t(0,"button",27)(1,"mat-icon"),o(2,"send"),i()())}function Z(r,s){r&1&&(t(0,"mat-icon",28),o(1,"task_alt"),i())}function $(r,s){if(r&1){let K=v();t(0,"span",29),g("click",function(){_(K);let n=S();return u(n.sendVerifyCode())}),o(1," Your email is not verified - send verify code "),t(2,"mat-icon"),o(3,"info"),i()()}}function ee(r,s){r&1&&(t(0,"span",30),o(1," Verify code has been sent. Please check your email "),t(2,"mat-icon"),o(3,"done"),i()())}function te(r,s){r&1&&d(0,"span",31)}var _e=(()=>{let s=class s{constructor(l){this.reqService=l,this.token=localStorage.getItem("token"),this.isVerifyCodeHasArrived=!1,this.isProfileEdited=!1,this.loaderMailVerify=!1,this.mainLoader=!1,this.noCorrectVerifyCode=!1,this.isClickedToSendVerifyEmailLink=!1,this.form=new j({avatar:new C("",P.required),f_name:new C("",P.required),l_name:new C(""),bio:new C("")})}ngOnInit(){this.reqService.post(f.getUserByToken,{token:this.token}).subscribe(l=>{this.profileData=l})}send(l){this.mainLoader=!0;let n=new FormData;n.set("file",l.files[0]),n.set("name",this.form.value.f_name),n.set("l_name",this.form.value.l_name),n.set("bio",this.form.value.bio),n.set("token",this.token),this.reqService.put(f.userEdit,n).subscribe(()=>{this.mainLoader=!1,this.isProfileEdited=!0,setTimeout(()=>{this.isProfileEdited=!1},3e3)})}setImage(l,n){if(n.files){let e=new FileReader;e.readAsDataURL(n.files[0]),e.onload=function(){l.src=e.result}}}sendVerifyCode(){this.isClickedToSendVerifyEmailLink=!0,this.loaderMailVerify=!0,this.reqService.post(f.emailSendVerifyCode,{token:this.token}).subscribe(()=>{this.loaderMailVerify=!1,this.isVerifyCodeHasArrived=!0})}checkVerifyCode(l){this.loaderMailVerify=!0,this.reqService.post(f.emailCheckVerifyCode,{token:this.token,code:l.value}).subscribe(n=>{n.status===400?this.noCorrectVerifyCode=!0:this.reqService.post(f.getUserByToken,{token:this.token}).subscribe(e=>{this.loaderMailVerify=!1,this.isVerifyCodeHasArrived=!1,this.isClickedToSendVerifyEmailLink=!1,this.profileData=e}),this.isVerifyCodeHasArrived=!0}),l.value=""}};s.\u0275fac=function(n){return new(n||s)(w(y))},s.\u0275cmp=k({type:s,selectors:[["app-profile-edit"]],standalone:!0,features:[E([y]),D],decls:47,vars:17,consts:[[1,"main-div",2,"position","relative"],[1,"profile_edited_panel"],["style","position: absolute; z-index: 1000; width: 100%; height: 100%"],[1,"header-block"],["routerLink","/chats-menu",1,"back_icon"],[3,"formGroup","ngSubmit"],[1,"img_box"],["alt","profile avatar",1,"user_img",3,"src"],["img",""],["formControlName","avatar","name","avatar","type","file",1,"input_select_img",3,"change"],["avatarFile",""],[1,"edit_button"],[1,"info_inputs_block"],["type","text","placeholder","Type your first name","formControlName","f_name","name","f_name",3,"value"],["type","text","placeholder","Type your last name","formControlName","l_name","name","l_name",3,"value"],[2,"position","relative","width","100%",3,"ngSubmit"],[1,"email_block",3,"type","placeholder","disabled","value"],["verifyCodeInput",""],["class","send_verify_code_button"],["class","email_has_ben_verify"],["class","email_verify_link"],["class","email_check_email_link"],["class","loader"],[2,"margin-top","15px","display","block"],["type","text","placeholder","Type your biography name","formControlName","bio","name","bio",3,"value"],[1,"send_button"],[2,"position","absolute","z-index","1000","width","100%","height","100%"],[1,"send_verify_code_button"],[1,"email_has_ben_verify"],[1,"email_verify_link",3,"click"],[1,"email_check_email_link"],[1,"loader"]],template:function(n,e){if(n&1){let x=v();t(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Your Profile Edited "),t(4,"mat-icon"),o(5,"done_circle"),i()()(),h(6,W,1,0,"app-main-loader",2),t(7,"div",3)(8,"mat-icon",4),o(9,"arrow_back_ios"),i(),t(10,"h4"),o(11,"Profile"),i()(),t(12,"form",5),g("ngSubmit",function(){_(x);let m=b(18);return u(e.send(m))}),t(13,"div",6),d(14,"img",7,8),t(16,"label")(17,"input",9,10),g("change",function(){_(x);let m=b(15),Q=b(18);return u(e.setImage(m,Q))}),i(),t(19,"mat-icon",11),o(20,"edit"),i()()(),t(21,"div",12)(22,"div")(23,"label")(24,"p"),o(25,"Name"),i(),d(26,"input",13),i(),t(27,"label")(28,"p"),o(29,"Last Name"),i(),d(30,"input",14),i()(),t(31,"p"),o(32,"Email"),i(),t(33,"form",15),g("ngSubmit",function(){_(x);let m=b(35);return u(e.checkVerifyCode(m))}),d(34,"input",16,17),h(36,X,3,0,"button",18)(37,Z,2,0,"mat-icon",19),i(),h(38,$,4,0,"span",20)(39,ee,4,0,"span",21)(40,te,1,0,"span",22),t(41,"label",23)(42,"p"),o(43,"Biography"),i(),d(44,"input",24),i()(),t(45,"button",25),o(46,"save"),i()()()}n&2&&(a(1),V("top",e.isProfileEdited?"15px":"-500px"),a(5),c(6,e.mainLoader?6:-1),a(6),p("formGroup",e.form),a(2),p("src",e.profileData?e.profileData.avatar:"",O),a(12),p("value",e.profileData?e.profileData.name:""),a(4),p("value",e.profileData?e.profileData.l_name:""),a(4),p("type",e.isVerifyCodeHasArrived?"number":"text")("placeholder",e.isVerifyCodeHasArrived?"Enter your verify code":"")("disabled",!e.isVerifyCodeHasArrived)("value",e.profileData&&!e.isVerifyCodeHasArrived?e.profileData.email:""),a(2),c(36,e.isVerifyCodeHasArrived?36:-1),a(1),c(37,e.profileData&&e.profileData.isMailVerify?37:-1),a(1),c(38,!e.isClickedToSendVerifyEmailLink&&e.profileData&&!e.profileData.isMailVerify&&!e.noCorrectVerifyCode?38:-1),a(1),c(39,e.isVerifyCodeHasArrived?39:-1),a(1),c(40,e.loaderMailVerify?40:-1),a(4),p("value",e.profileData?e.profileData.bio:""))},dependencies:[T,Y,R,N,H,q,G,B,z,L,A,F,U,I,J],styles:[".main-div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;flex-direction:column;height:100vh;background-color:#1e1e1e;overflow-y:scroll;padding-bottom:80px}form[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.main-div[_ngcontent-%COMP%]::-webkit-scrollbar{width:0}.user_img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:50%}.back_icon[_ngcontent-%COMP%]{color:#fff;display:none;position:absolute;left:25px;top:20px}.header-block[_ngcontent-%COMP%]{padding:16px 25px;background-color:#000;width:100%;border-bottom-right-radius:32px;border-bottom-left-radius:32px;position:relative}.img_box[_ngcontent-%COMP%]{margin-top:30px;position:relative;width:100px}.input_select_img[_ngcontent-%COMP%]{display:none}.header-block[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-family:Poppins;text-align:center}.edit_button[_ngcontent-%COMP%]{background:linear-gradient(to left,#003aff,rgba(255,0,251,.77));width:40px;height:40px;display:flex;align-items:center;justify-content:center;position:absolute;bottom:-10px;right:-10px;color:#fff;border-radius:50%}.info_inputs_block[_ngcontent-%COMP%]{margin-top:30px}.info_inputs_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;width:500px;justify-content:space-between}.info_inputs_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .info_inputs_block[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .info_inputs_block[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-family:Poppins;color:#fff;margin-bottom:5px}.info_inputs_block[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-top:15px}.info_inputs_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .info_inputs_block[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{outline:none;height:15px;border:none;width:100%;font-family:Poppins;color:#fff;font-size:14px;font-weight:500;line-height:21px;text-align:left;padding:25px;transition:.3s;border-radius:100px;background:rgb(38,38,38)}.send_button[_ngcontent-%COMP%]{width:100%;border:none;padding:5px;border-radius:30px;margin-top:30px;font-family:Poppins;text-transform:uppercase;font-size:20px;font-weight:bolder;color:#fff;background-color:#2a2a2a;background:linear-gradient(to left,rgba(0,58,255,.68),rgba(255,0,251,.68))}.email_verify_link[_ngcontent-%COMP%]{text-align:end;margin-top:5px;cursor:pointer;width:100%;color:#fda400;font-size:15px;display:flex;align-items:center;justify-content:flex-end}.email_check_email_link[_ngcontent-%COMP%]{text-align:end;margin-top:5px;cursor:pointer;width:100%;color:#2cbd15;font-size:15px;display:flex;align-items:center;justify-content:flex-end}.email_verify_link[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{margin-left:3px;width:20px;height:20px;font-size:20px}.email_verify_link[_ngcontent-%COMP%]:hover{color:#fdca00}.email_has_ben_verify[_ngcontent-%COMP%]{color:#2cbd15;position:absolute;filter:drop-shadow(3px 3px 3px rgba(0,0,0,.32));right:15px;top:13px}.send_verify_code_button[_ngcontent-%COMP%]{color:#0040e1;display:flex;filter:drop-shadow(3px 3px 3px rgba(0,0,0,.14));align-items:center;justify-content:center;background-color:transparent;border:none;position:absolute;top:12px;right:14px}.email_block[_ngcontent-%COMP%]{outline:none;height:15px;border:none;width:100%;font-family:Poppins;color:#fff;font-size:14px;font-weight:500;line-height:21px;display:flex;align-items:center;justify-content:space-between;text-align:left;padding:25px 7px 25px 25px;transition:.3s;border-radius:100px;background:rgb(63,63,63)}@media screen and (max-width: 940px){.back_icon[_ngcontent-%COMP%]{display:block}}@media screen and (max-width: 585px){form[_ngcontent-%COMP%]{width:90%}.info_inputs_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], .info_inputs_block[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{width:100%;display:block;margin-top:25px}.info_inputs_block[_ngcontent-%COMP%]{width:100%}.info_inputs_block[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .info_inputs_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{padding:30px 25px}.info_inputs_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-direction:column;width:100%}.send_button[_ngcontent-%COMP%]{padding:15px}}.loader[_ngcontent-%COMP%]{margin-top:10px;width:20px;height:20px;border:3px solid #FFF;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.profile_edited_panel[_ngcontent-%COMP%]{z-index:1000;transition:.5s;padding:20px;position:absolute;border-radius:15px;top:20px;background-color:#101010;border:1px solid rgba(255,255,255,.21)}.profile_edited_panel[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{color:#1e8539;font-family:Poppins}"]});let r=s;return r})();export{_e as ProfileEditComponent};
