import{a as j}from"./chunk-3U5XJFFI.js";import{C as K,D as X,e as z,w as B,x as G}from"./chunk-JTFNDISO.js";import{Ab as k,Bb as y,Db as S,Ra as c,Sa as T,Xb as I,Yb as V,_a as f,bb as P,da as F,db as u,eb as M,fb as s,fc as R,gb as o,ha as _,hb as v,hc as A,ia as p,ic as D,jc as N,kb as h,lc as U,mc as q,nb as x,nc as L,ob as d,pc as Q,qc as $,rb as w,rc as H,sb as m,sc as W,tb as O,tc as Y,uc as J,yb as E}from"./chunk-LENDDSTQ.js";import"./chunk-JMZ7DUBM.js";var Z=["messagesScrollBox"],ee=["img"];function te(t,l){if(t&1){let r=h();s(0,"mat-icon",21),x("click",function(){_(r);let e=d(2).$implicit,i=d(2);return p(i.textToSpeech(e.message))}),m(1,"volume_up"),o()}}function ne(t,l){if(t&1){let r=h();s(0,"mat-icon",21),x("click",function(){_(r);let e=d(2).$implicit,i=d(2);return p(i.textToSpeech(e.message))}),m(1,"volume_off"),o()}}function ie(t,l){if(t&1){let r=h();s(0,"mat-icon"),m(1,"auto_awesome"),o(),s(2,"div",18)(3,"pre"),m(4),o(),s(5,"div",19)(6,"mat-icon",20),x("click",function(){_(r);let e=d().$implicit,i=d(2);return p(i.copyText(e.message))}),m(7),o(),u(8,te,2,0,"mat-icon")(9,ne,2,0),o()()}if(t&2){let r=d().$implicit,n=d(2);c(4),O(r.message),c(3),O(n.isCopied?"done":"content_copy"),c(1),M(8,n.isSpeak?9:8)}}function oe(t,l){if(t&1&&(s(0,"p"),m(1),o()),t&2){let r=d().$implicit;c(1),O(r.message)}}function se(t,l){if(t&1&&(s(0,"div",17),u(1,ie,10,3)(2,oe,2,1),o()),t&2){let r=l.$implicit,n=d(2);P(n.thisUser.id!==r.sender?"message_box_reverce":"message_box"),c(1),M(1,n.thisUser.id!==r.sender?1:2)}}function ae(t,l){if(t&1&&(s(0,"div"),u(1,se,3,3,"div",16),o()),t&2){let r=d();c(1),f("ngForOf",r.aiChatMessages)}}function re(t,l){t&1&&(s(0,"div",22)(1,"mat-icon"),m(2,"auto_awesome"),o(),v(3,"img",23),o())}function le(t,l){if(t&1){let r=h();s(0,"div")(1,"mat-icon",21),x("click",function(){_(r);let e=d();return p(e.isSelectedImg=!1)}),m(2,"close"),o(),v(3,"img",null,24),o()}}var Me=(()=>{let l=class l{constructor(n){this.reqService=n,this.isLoadedAiAnswer=!0,this.aiChatMessages=[],this.isCopied=!1,this.isSpeak=!1,this.token=localStorage.getItem("token"),this.isSelectedImg=!1,this.form=new L({message:new Q("",N.required)}),this.innerWidth=innerWidth}ngOnInit(){let n={token:this.token};this.reqService.post(A.getUserByToken,n).subscribe(e=>{this.thisUser=e}),setTimeout(()=>{this.messagesBoxScroll&&(this.messagesBoxScroll.nativeElement.scrollTop=this.messagesBoxScroll.nativeElement.scrollHeight)},1e3)}textToSpeech(n){if(this.isSpeak=!this.isSpeak,this.isSpeak){let e=new SpeechSynthesisUtterance;e.text=n,e.lang="en-US",speechSynthesis.speak(e)}else speechSynthesis.pause()}copyText(n){this.isCopied=!0,navigator.clipboard.writeText(n)}setImage(n,e,i){try{this.isSelectedImg=!0;let a=new FileReader;e.files&&(a.readAsDataURL(e.files[0]),a.onload=()=>{this.img&&(this.img.nativeElement.src=a.result)})}catch{this.isSelectedImg=!1}}send(n){if(this.isCopied=!1,this.isSpeak=!1,this.isLoadedAiAnswer=!1,this.form.value.message){let e=new Date,i={message:this.form.value.message,sender:this.thisUser.id};this.aiChatMessages.push(i);let a=new FormData;this.isSelectedImg&&a.set("image",n.files[0]),a.set("message",this.form.value.message),a.set("userToken",this.token),this.reqService.post(A.ai,a).subscribe(C=>{if(C.aiGeneratedMessage===""){let g=new Audio;g.src="assets/audios/notifiaction/error-call-to-attention-129258.mp3",g.load(),g.play()}else{let g=new Audio;g.src="assets/audios/notifiaction/bloop-2-186531.mp3",g.load(),g.play()}let b={message:C.aiGeneratedMessage==""?"try typing other text":C.aiGeneratedMessage,sender:"ai"};this.form.reset(),setTimeout(()=>{this.messagesBoxScroll?.nativeElement.scrollTo(0,this.messagesBoxScroll?.nativeElement.scrollHeight)},100),this.isLoadedAiAnswer=!0,this.aiChatMessages.push(b)})}this.form.reset(),setTimeout(()=>{this.messagesBoxScroll?.nativeElement.scrollTo(0,this.messagesBoxScroll?.nativeElement.scrollHeight)},100)}};l.\u0275fac=function(e){return new(e||l)(T(R))},l.\u0275cmp=F({type:l,selectors:[["app-flash-ai"]],viewQuery:function(e,i){if(e&1&&(y(Z,5),y(ee,5)),e&2){let a;k(a=S())&&(i.messagesBoxScroll=a.first),k(a=S())&&(i.img=a.first)}},standalone:!0,features:[E],decls:28,vars:8,consts:[[1,"main-div"],[1,"lear"],["appResizeHeight","",1,"messages_scroll_box",3,"size"],["messagesScrollBox",""],[4,"ngIf"],["class","ai_loading"],[1,"selected_chat_user"],["routerLink","/chats-menu"],[1,"img_box"],[1,"message_sending_panel"],[3,"formGroup","ngSubmit"],["matInput","","formControlName","message","placeholder","Send Your Message to Ai","name","message","type","text",1,"message_input"],[1,"send_button",3,"disabled"],[1,"select_image"],["type","file","multiple","","accept","image/*",3,"change"],["imageInput",""],["style","font-size: 16px;","class","message",3,"class",4,"ngFor","ngForOf"],[1,"message",2,"font-size","16px"],[1,"animated-message"],[1,"message-tools-box"],[2,"margin-right","10px",3,"click"],[3,"click"],[1,"ai_loading"],["src","../../../assets/images/loading.gif"],["img",""]],template:function(e,i){if(e&1){let a=h();s(0,"div",0)(1,"div",1)(2,"div",2,3),u(4,ae,2,1,"div",4)(5,re,4,0,"div",5),o(),s(6,"div",6)(7,"a",7)(8,"mat-icon"),m(9,"arrow_back"),o()(),s(10,"div",8)(11,"mat-icon"),m(12,"auto_awesome"),o(),s(13,"h3"),m(14,"Flash Ai"),o()()(),s(15,"div",9)(16,"form",10),x("ngSubmit",function(){_(a);let b=w(27);return p(i.send(b))}),u(17,le,5,0,"div",4),v(18,"input",11),s(19,"button",12)(20,"mat-icon"),m(21,"auto_awesome"),o()()(),s(22,"label")(23,"span",13)(24,"mat-icon"),m(25,"photo_library"),o()(),s(26,"input",14,15),x("change",function(b){_(a);let g=w(27);return p(i.setImage(i.img,g,b))}),o()()()()()}e&2&&(c(2),f("size",170),c(2),f("ngIf",i.aiChatMessages!=null),c(1),M(5,i.isLoadedAiAnswer?-1:5),c(11),f("formGroup",i.form),c(1),f("ngIf",i.isSelectedImg),c(2),f("disabled",i.form.invalid),c(1),P(i.form.valid?"send_button_icon-anim":""))},dependencies:[Y,$,D,U,q,G,B,X,K,I,V,J,H,W,j,z],styles:[".main-div[_ngcontent-%COMP%]{background-repeat:no-repeat;background-color:#1e1e1e;background-size:cover;height:100vh;box-shadow:inset #00000059 0 5px 15px}.lear[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;flex-direction:column;padding:90px 20px 0;position:relative;backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);background-color:#0000001f}.message[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#0e0e0e;border-radius:30px;position:relative;display:flex;align-items:center;padding:10px 15px 13px;border:1px solid #ffffff26}.message[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > pre[_ngcontent-%COMP%]{background:linear-gradient(to left,#003aff,#ff00fb);-webkit-background-clip:text;-webkit-text-fill-color:transparent;-webkit-user-select:auto;user-select:auto;table-layout:fixed;display:table;color:#fff;font-weight:400;font-size:20px;font-family:Rubik Glitch,system-ui;align-items:center;position:relative;margin-left:10px;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.message[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding:10px 20px;border-radius:30px;background-image:linear-gradient(to left,#003399,#7100ff);color:#fff;font-weight:400;font-size:20px;font-family:Rubik Glitch,system-ui;display:flex;align-items:center;position:relative;margin-left:40px}.message[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#fff;margin-bottom:10px;margin-left:5px}.message_box[_ngcontent-%COMP%]{overflow-x:scroll;width:100%;display:flex;align-items:center;justify-content:end;margin-top:20px;-ms-overflow-style:none;scrollbar-width:none}.message_box[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.message_box_reverce[_ngcontent-%COMP%]{width:100%;overflow-x:scroll;position:relative;display:flex;align-items:flex-start;justify-content:start;flex-direction:column;margin-top:13px}.message_sending_panel[_ngcontent-%COMP%]{position:fixed;display:flex;bottom:20px;width:70%;align-items:center}.message_sending_panel[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row-reverse;position:relative;width:100%}.message_sending_panel[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:-60px;right:0}.message_sending_panel[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#fff;position:absolute;top:-10px;right:-10px;background-color:#b54949;border-radius:50%}.message_sending_panel[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:55px;height:55px;border-radius:10px;border:5px solid #2a2a2a;object-fit:cover}.select_image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px;width:50px;background-color:#2a2a2a;margin-left:10px;border-radius:50%}.select_image[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#c5c5c5}.message_sending_panel[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.message_input[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px;background-color:#2a2a2a;display:block;border:none;outline:none;width:100%;height:30px;font-size:20px;border-radius:30px;padding:25px 60px 25px 30px;font-family:Rubik Glitch,system-ui;font-weight:bolder;color:#fff}.message_input[_ngcontent-%COMP%]::placeholder{color:#fff9}.controllers_box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;padding:0 25px}.send_button[_ngcontent-%COMP%]{width:40px;height:40px;border:none;position:absolute;right:6px;top:5px;border-radius:50%;background-color:#fff}.send_button[_ngcontent-%COMP%]:disabled{opacity:.3}.send_button[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{background:linear-gradient(to left,#003aff,#ff00fb);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.send_button_icon-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_send_anim alternate-reverse .4s ease-in-out infinite}@keyframes _ngcontent-%COMP%_send_anim{0%{scale:.9}to{scale:1}}.messages_scroll_box[_ngcontent-%COMP%]{width:100%;overflow-y:scroll;padding-bottom:10px}.selected_chat_user[_ngcontent-%COMP%]{padding:15px 25px;background-color:#0a0a0a;position:absolute;left:0;top:0;width:100%;display:flex;align-items:center;justify-content:center;border-bottom:1px solid rgba(117,117,117,.42)}.selected_chat_user[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-right:20px;display:none;width:25px}.selected_chat_user[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#fff;display:block;font-size:25px}.selected_chat_user[_ngcontent-%COMP%] > .img_box[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.selected_chat_user[_ngcontent-%COMP%] > .img_box[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{background:linear-gradient(to left,#003aff,#ff00fb);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:25px;margin-left:20px}.selected_chat_user[_ngcontent-%COMP%] > .img_box[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{background:linear-gradient(to left,#003aff,#ff00fb);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:30px;width:30px;height:30px}.in-chat-user-avatar[_ngcontent-%COMP%]{width:30px;height:30px;object-fit:cover;border-radius:50%;display:block;position:absolute;left:-40px}.first_message_block[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-size:35px;color:#fff;margin-bottom:30px}.first_message_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative}.first_message_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus{outline:5px solid #5c13a4}.first_message_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:35px;width:33px;height:31px;color:#fff;display:flex;align-items:center;justify-content:center}@media screen and (max-width: 940px){.messages_scroll_box[_ngcontent-%COMP%]{width:100%}.selected_chat_user[_ngcontent-%COMP%]{padding:10px}.selected_chat_user[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:block;position:absolute;left:16px}.message_sending_panel[_ngcontent-%COMP%]{width:92%}}@media screen and (max-width: 594px){.first_message_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:100%}.first_message_block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:90%}.message_box[_ngcontent-%COMP%]{margin-top:5px}.message[_ngcontent-%COMP%] > pre[_ngcontent-%COMP%], .message[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:16px}.lear[_ngcontent-%COMP%]{padding:90px 16px 0}}@media screen and (max-width: 574px){.first_message_block[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-size:30px;text-align:center;max-width:90%}}.ai_loading[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:5px}.ai_loading[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#fff}.ai_loading[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:130px;border-radius:20px}.animated-message[_ngcontent-%COMP%]{position:relative;animation:.2s _ngcontent-%COMP%_animatedmessage alternate ease-in-out}@keyframes _ngcontent-%COMP%_animatedmessage{0%{transform:translate(-700px)}to{transform:translate(0)}}.message-tools-box[_ngcontent-%COMP%]{position:absolute;right:20px;top:-30px}.message-tools-box[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#898989}"]});let t=l;return t})();export{Me as FlashAiComponent};
