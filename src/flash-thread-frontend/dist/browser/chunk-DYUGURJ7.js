import{a as A,b as Q}from"./chunk-XBQI7VOT.js";import{a as q}from"./chunk-SQY326CE.js";import"./chunk-OWTRPE7Q.js";import{e as j,f as F,w as R,x as B,z as $}from"./chunk-WWDSCM5Q.js";import{Ab as z,Bb as I,Db as U,Ka as u,Ra as s,Sa as y,Wb as T,Xb as L,_a as l,da as k,db as g,dc as b,eb as x,fb as i,fc as f,gb as o,hb as m,ib as v,jb as M,nb as C,ob as h,rb as w,sb as p,tb as _,ub as S,vb as D,yb as E,zb as O}from"./chunk-KIWFM5SP.js";import"./chunk-JMZ7DUBM.js";var G=["search"];function J(n,c){if(n&1&&m(0,"app-user-details",5),n&2){let a=h();l("userData",a.userData)("size",75)}}function K(n,c){n&1&&(i(0,"div",16)(1,"div",17),m(2,"div",18)(3,"div",19),o()())}var H=n=>["/messenger/chat",n];function W(n,c){if(n&1&&(i(0,"div",21),m(1,"img",22),i(2,"div",23)(3,"h2"),p(4),o(),i(5,"p"),p(6),o()()()),n&2){let a=h().$implicit;l("routerLink",O(5,H,a.id)),s(1),l("src",a.avatar,u)("alt","avatar "+a.name),s(3),_(a.name),s(2),_(a.bio)}}function X(n,c){if(n&1&&(v(0),g(1,W,7,7,"div",20),M()),n&2){let a=c.$implicit,r=h(2);s(1),l("ngIf",r.tokenUser.id!==a.id)}}function Y(n,c){if(n&1&&(i(0,"div",14),g(1,K,4,0,"div",15)(2,X,2,1,"ng-container",13),o()),n&2){let a=h(),r=w(13);s(1),x(1,a.searchData.length==0&&r.value!=""?1:-1),s(1),l("ngForOf",a.searchData)}}function Z(n,c){if(n&1&&(i(0,"div",25),m(1,"img",26),i(2,"div")(3,"div")(4,"h3"),p(5),o(),i(6,"p"),p(7),o()(),i(8,"p"),p(9),o()()()),n&2){let a=h(),r=a.$implicit,e=a.index,t=h();l("routerLink",O(5,H,r.id)),s(1),l("src",r.avatar,u),s(4),_(r.name),s(2),S(" ",t.chatsData[e].messages[t.chatsData[e].messages.length-1].date.hours+":"+t.chatsData[e].messages[t.chatsData[e].messages.length-1].date.minutes,""),s(2),_(t.chatsData[e].messages[t.chatsData[e].messages.length-1].message)}}function ee(n,c){if(n&1&&(v(0),g(1,Z,10,7,"div",24),M()),n&2){let a=c.$implicit;s(1),l("ngIf",a!=null)}}var he=(()=>{let c=class c{constructor(r){this.reqService=r,this.isOpenedSearchBlock=!1,this.aiLastMessage="loading...",this.chatsData=[],this.token=localStorage.getItem("token"),this.isOpenedUserDetails=!1,this.userData={avatar:"./assets/images/load/load.jpg",name:"loading name...",email:"loading email...",bio:"loading biography...",l_name:"loading last name..."},this.searchData=[],this.chatUsersData=[]}ngOnInit(){let r={token:this.token};this.reqService.post(f.aiGetChat,{token:this.token}).subscribe(e=>{e.messages[e.messages.length-1].message.length>25?this.aiLastMessage=e.messages[e.messages.length-1].message.slice(0,24)+"...":this.aiLastMessage=e.messages[e.messages.length-1].message}),this.reqService.post(f.getUserByToken,r).subscribe(e=>{this.tokenUser=e,this.userData=e}),this.reqService.post(f.getActiveChats,r).subscribe(e=>{e.forEach(t=>{t&&this.chatsData.push(t)}),e.forEach((t,d)=>{t&&t.usersId.forEach(P=>{if(this.userData.id!=P){let V={id:P,token:this.token};this.reqService.post(f.getUserById,V).subscribe(N=>{this.chatUsersData.push(N)})}})})})}searchValue(){let r={name:this.input?.nativeElement.value.split("").filter(e=>e.trim().length).join("")};this.reqService.post(f.search,r).subscribe(e=>{this.searchData=e})}};c.\u0275fac=function(e){return new(e||c)(y(b))},c.\u0275cmp=k({type:c,selectors:[["app-chats-menu"]],viewQuery:function(e,t){if(e&1&&I(G,5),e&2){let d;z(d=U())&&(t.input=d.first)}},standalone:!0,features:[D([b]),E],decls:27,vars:7,consts:[["appResizeHeight","",1,"main-div",3,"size"],[1,"box"],[1,"header_box"],[1,"user_img_box",3,"click"],["alt","user image",3,"src","title"],["appResizeHeight","",3,"userData","size"],[1,"search_box",3,"mouseleave","click"],[1,"search_icon"],["placeholder","Type your search...","type","text",1,"search",3,"focus","input"],["search",""],["class","search_list_block"],[1,"chat_block"],["routerLink","/messenger/ai",1,"ai_chat"],[4,"ngFor","ngForOf"],[1,"search_list_block"],["class","loading_list"],[1,"loading_list"],[1,"list",2,"margin-top","20px"],[2,"width","50px","height","50px","border-radius","50%","background-color","#2a2a2a"],[2,"margin-left","20px","width","70%","height","20px","border-radius","5px","background-color","#2a2a2a"],["style","margin-top: 20px","class","list",3,"routerLink",4,"ngIf"],[1,"list",2,"margin-top","20px",3,"routerLink"],[3,"src","alt"],[2,"margin-left","20px"],["routerLinkActive","active-chat","class","chat",3,"routerLink",4,"ngIf"],["routerLinkActive","active-chat",1,"chat",3,"routerLink"],["alt","chat",3,"src"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),p(4,"Messages"),o(),i(5,"div",3),C("click",function(){return t.isOpenedUserDetails=!t.isOpenedUserDetails}),m(6,"img",4),o(),g(7,J,1,2,"app-user-details",5),o(),i(8,"div",6),C("mouseleave",function(){return t.isOpenedSearchBlock=!1})("click",function(){return t.isOpenedSearchBlock=!0}),i(9,"label")(10,"mat-icon",7),p(11,"search"),o(),i(12,"input",8,9),C("focus",function(){return t.isOpenedSearchBlock=!0})("input",function(){return t.searchValue()}),o()(),g(14,Y,3,2,"div",10),o()(),i(15,"div",11)(16,"h3"),p(17,"Chat"),o(),i(18,"div",12)(19,"mat-icon"),p(20,"auto_awesome"),o(),i(21,"div")(22,"h3"),p(23,"Flash Ai"),o(),i(24,"p"),p(25),o()()(),g(26,ee,2,1,"ng-container",13),o()()),e&2&&(l("size",1),s(6),l("src",t.userData.avatar,u)("title",t.userData.name),s(1),x(7,t.isOpenedUserDetails?7:-1),s(7),x(14,t.isOpenedSearchBlock?14:-1),s(11),_(t.aiLastMessage),s(1),l("ngForOf",t.chatUsersData))},dependencies:[q,T,L,j,A,Q,$,F,B,R],styles:['.main-div[_ngcontent-%COMP%]{overflow-y:scroll;background-color:#0d0d0d;width:100%}.main-div[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.list[_ngcontent-%COMP%]{padding:10px;background-color:#3d3d3d;border-radius:10px;display:flex;align-items:center;border:1px solid rgba(255,255,255,.13)}.search_list_block[_ngcontent-%COMP%]{width:100%;padding:0 20px 20px;box-shadow:#00000012 0 3px 6px,#00000021 0 3px 6px;position:absolute;top:35px;background-color:#232323;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.list[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:50%}.list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#fff}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#000;padding:24px;flex-direction:column;border-bottom-right-radius:32px;border-bottom-left-radius:32px}.side-icon[_ngcontent-%COMP%]{width:30px;height:30px}.search[_ngcontent-%COMP%]{outline:none;height:15px;border:none;font-family:Poppins;color:#fff;font-size:14px;font-weight:500;line-height:21px;text-align:left;padding:25px 25px 25px 62px;width:100%;transition:.3s;border-radius:100px;background:rgba(217,217,217,.08)}.search[_ngcontent-%COMP%]:focus{box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px;border-color:#039}app-user-details[_ngcontent-%COMP%]{position:absolute;box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px;top:75px;width:100%;transition:.2s;left:0;z-index:999}.user_img_box[_ngcontent-%COMP%]{width:45px;height:45px;background-color:#000;border:2px solid rgb(0,80,239);top:20px;right:20px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;padding:24px;transition:.2s}.user_img_box[_ngcontent-%COMP%]:active{scale:.95}.user_img_box[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border-radius:50%}.chat_block[_ngcontent-%COMP%]{padding:32px 25px 25px}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;transition:.2s scale;outline:none;margin-top:15px}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%]{margin-top:17px;width:100%;display:flex;align-items:center;transition:.2s scale;outline:none}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#003aff;width:40px;height:40px;font-size:40px;background:linear-gradient(to left,#003aff,#ff00fb);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:25px;margin-left:20px;background:linear-gradient(to left,#003aff,#ff00fb);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:14px;font-weight:600;line-height:21px;text-align:left;margin-left:20px}.active-chat.active-chat.active-chat[_ngcontent-%COMP%]{background:rgb(68,68,68);border:1px solid rgba(255,255,255,.28);scale:1.02}.active-chat.active-chat.active-chat[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:30px;height:30px;background-color:#444;border-top-right-radius:6px;rotate:45deg;right:-10px}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:16px;width:100%}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:12px;font-weight:500;line-height:18px;text-align:left}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:14px;font-weight:600;line-height:21px;text-align:left}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:12px;font-weight:500;line-height:18px;text-align:left}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:cover;border-radius:50%;display:block}.search_box[_ngcontent-%COMP%]{position:relative;width:100%}.search_icon[_ngcontent-%COMP%]{color:#d7d7d796;width:26px;height:26px;font-size:26px;position:absolute;top:14px;left:24px}@media screen and (max-width: 520px){.search[_ngcontent-%COMP%]{width:100%}}.header_box[_ngcontent-%COMP%]{width:100%;margin:56px 0 32px;display:flex;align-items:center;justify-content:space-between}.header_box[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{color:#fff}.chat_block[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff;font-family:Poppins;font-size:16px;font-weight:600;line-height:24px}']});let n=c;return n})();export{he as ChatsMenuComponent};
