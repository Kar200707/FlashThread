import{a as B,b as Q}from"./chunk-PEOY24SD.js";import{a as R}from"./chunk-3U5XJFFI.js";import"./chunk-WZCWJEY5.js";import{D as $,e as F,f as L,w as q,x as A}from"./chunk-JTFNDISO.js";import{Ab as I,Bb as U,Db as T,Ka as f,Ra as o,Sa as y,Xb as z,Yb as j,_a as l,da as P,db as g,eb as x,fb as r,fc as b,gb as s,hb as m,hc as u,ib as v,jb as M,nb as C,ob as h,rb as w,sb as d,tb as _,ub as S,vb as D,yb as E,zb as O}from"./chunk-LENDDSTQ.js";import"./chunk-JMZ7DUBM.js";var N=["search"];function J(e,c){if(e&1&&m(0,"app-user-details",4),e&2){let i=h();l("userData",i.userData)("size",75)}}function K(e,c){e&1&&(r(0,"div",14)(1,"div",15),m(2,"div",16)(3,"div",17),s()())}var H=e=>["/messenger/chat",e];function W(e,c){if(e&1&&(r(0,"div",19),m(1,"img",20),r(2,"div",21)(3,"h2"),d(4),s(),r(5,"p"),d(6),s()()()),e&2){let i=h().$implicit;l("routerLink",O(5,H,i.id)),o(1),l("src",i.avatar,f)("alt","avatar "+i.name),o(3),_(i.name),o(2),_(i.bio)}}function X(e,c){if(e&1&&(v(0),g(1,W,7,7,"div",18),M()),e&2){let i=c.$implicit,a=h(2);o(1),l("ngIf",a.tokenUser.id!==i.id)}}function Y(e,c){if(e&1&&(r(0,"div",12),g(1,K,4,0,"div",13)(2,X,2,1,"ng-container",11),s()),e&2){let i=h(),a=w(7);o(1),x(1,i.searchData.length==0&&a.value!=""?1:-1),o(1),l("ngForOf",i.searchData)}}function Z(e,c){if(e&1&&(r(0,"div",23),m(1,"img",24),r(2,"div")(3,"div")(4,"h3"),d(5),s(),r(6,"p"),d(7),s()(),r(8,"p"),d(9),s()()()),e&2){let i=h(),a=i.$implicit,n=i.index,t=h();l("routerLink",O(5,H,a.id)),o(1),l("src",a.avatar,f),o(4),_(a.name),o(2),S(" ",t.chatsData[n].messages[t.chatsData[n].messages.length-1].date.hours+":"+t.chatsData[n].messages[t.chatsData[n].messages.length-1].date.minutes,""),o(2),_(t.chatsData[n].messages[t.chatsData[n].messages.length-1].message)}}function tt(e,c){if(e&1&&(v(0),g(1,Z,10,7,"div",22),M()),e&2){let i=c.$implicit;o(1),l("ngIf",i!=null)}}var ht=(()=>{let c=class c{constructor(a){this.reqService=a,this.isOpenedSearchBlock=!1,this.chatsData=[],this.token=localStorage.getItem("token"),this.isOpenedUserDetails=!1,this.userData={avatar:"./assets/images/load/load.jpg",name:"loading name...",email:"loading email...",bio:"loading biography...",l_name:"loading last name..."},this.searchData=[],this.chatUsersData=[]}ngOnInit(){let a={token:this.token};this.reqService.post(u.getUserByToken,a).subscribe(n=>{this.tokenUser=n,this.userData=n}),this.reqService.post(u.getActiveChats,a).subscribe(n=>{n.forEach(t=>{t&&this.chatsData.push(t)}),n.forEach((t,p)=>{t&&t.usersId.forEach(k=>{if(this.userData.id!=k){let V={id:k,token:this.token};this.reqService.post(u.getUserById,V).subscribe(G=>{this.chatUsersData.push(G)})}})})})}searchValue(){let a={name:this.input?.nativeElement.value.split("").filter(n=>n.trim().length).join("")};this.reqService.post(u.search,a).subscribe(n=>{this.searchData=n})}};c.\u0275fac=function(n){return new(n||c)(y(b))},c.\u0275cmp=P({type:c,selectors:[["app-chats-menu"]],viewQuery:function(n,t){if(n&1&&U(N,5),n&2){let p;I(p=T())&&(t.input=p.first)}},standalone:!0,features:[D([b]),E],decls:19,vars:6,consts:[["appResizeHeight","",1,"main-div",3,"size"],[1,"box"],[1,"user_img_box",3,"click"],["alt","user image",3,"src","title"],["appResizeHeight","",3,"userData","size"],[1,"search_box",3,"mouseleave","click"],["placeholder","Search","type","text",1,"search",3,"focus","input"],["search",""],["class","search_list_block"],[1,"chat_block"],["routerLink","/messenger/ai",1,"ai_chat"],[4,"ngFor","ngForOf"],[1,"search_list_block"],["class","loading_list"],[1,"loading_list"],[1,"list",2,"margin-top","20px"],[2,"width","50px","height","50px","border-radius","50%","background-color","#2a2a2a"],[2,"margin-left","20px","width","70%","height","20px","border-radius","5px","background-color","#2a2a2a"],["style","margin-top: 20px","class","list",3,"routerLink",4,"ngIf"],[1,"list",2,"margin-top","20px",3,"routerLink"],[3,"src","alt"],[2,"margin-left","20px"],["routerLinkActive","active-chat","class","chat",3,"routerLink",4,"ngIf"],["routerLinkActive","active-chat",1,"chat",3,"routerLink"],["alt","chat",3,"src"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),C("click",function(){return t.isOpenedUserDetails=!t.isOpenedUserDetails}),m(3,"img",3),s(),g(4,J,1,2,"app-user-details",4),r(5,"div",5),C("mouseleave",function(){return t.isOpenedSearchBlock=!1})("click",function(){return t.isOpenedSearchBlock=!0}),r(6,"input",6,7),C("focus",function(){return t.isOpenedSearchBlock=!0})("input",function(){return t.searchValue()}),s(),g(8,Y,3,2,"div",8),s()(),r(9,"div",9)(10,"div",10)(11,"mat-icon"),d(12,"auto_awesome"),s(),r(13,"div")(14,"h3"),d(15,"Flash Ai"),s(),r(16,"p"),d(17,"Ai"),s()()(),g(18,tt,2,1,"ng-container",11),s()()),n&2&&(l("size",1),o(3),l("src",t.userData.avatar,f)("title",t.userData.name),o(1),x(4,t.isOpenedUserDetails?4:-1),o(4),x(8,t.isOpenedSearchBlock?8:-1),o(10),l("ngForOf",t.chatUsersData))},dependencies:[R,z,j,F,B,Q,$,L,A,q],styles:['.main-div[_ngcontent-%COMP%]{background-image:linear-gradient(to left,rgba(152,46,131,.14),rgba(0,51,153,.12));background-color:#171717;overflow-y:scroll;width:100%}.main-div[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.list[_ngcontent-%COMP%]{padding:10px;background-color:#3d3d3d;border-radius:10px;display:flex;align-items:center;border:1px solid rgba(255,255,255,.13)}.search_list_block[_ngcontent-%COMP%]{width:100%;padding:0 20px 20px;box-shadow:#00000012 0 3px 6px,#00000021 0 3px 6px;position:absolute;top:35px;background-color:#232323;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.list[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:50%}.list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#fff}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#171717;padding:15px}.side-icon[_ngcontent-%COMP%]{width:30px;height:30px}.search[_ngcontent-%COMP%]{outline:none;color:#fff;background-color:transparent;border:1px solid;height:15px;font-family:Asap Condensed,sans-serif;font-weight:bolder;border-radius:20px;padding:21px 15px 20px;width:100%;transition:.3s}.search[_ngcontent-%COMP%]:focus{box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px;border-color:#039}app-user-details[_ngcontent-%COMP%]{position:absolute;box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px;top:75px;width:100%;transition:.2s;left:0;z-index:999}.user_img_box[_ngcontent-%COMP%]{width:45px;height:45px;margin-right:10px;background-color:#3d3d3d;top:20px;right:20px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;padding:20px;transition:.2s}.user_img_box[_ngcontent-%COMP%]:active{scale:.95}.user_img_box[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:35px;height:35px;object-fit:cover;border-radius:50%}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%]{width:100%;padding:10px;background:rgba(23,23,23,.39);fill:#fff;display:flex;align-items:center;border-top:1px solid rgba(0,0,0,.6);transition:.2s scale;outline:none}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%]{width:100%;padding:10px;background:rgba(42,42,42,.59);fill:#fff;display:flex;align-items:center;border:1px solid rgba(255,255,255,.06);transition:.2s scale;outline:none}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#003aff;width:40px;height:40px;font-size:40px;background:linear-gradient(to left,#003aff,#ff00fb);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff;font-family:Rubik Glitch,system-ui;font-size:25px;margin-left:20px;background:linear-gradient(to left,#003aff,#ff00fb);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.chat_block[_ngcontent-%COMP%] > .ai_chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#ffffff7d;margin-left:20px}.active-chat.active-chat.active-chat[_ngcontent-%COMP%]{background:rgb(68,68,68);border:1px solid rgba(255,255,255,.28);scale:1.02}.active-chat.active-chat.active-chat[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:30px;height:30px;background-color:#444;border-top-right-radius:6px;rotate:45deg;right:-10px}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:15px;width:100%}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#c4c4c4}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff;font-family:Rubik Glitch,system-ui;font-size:25px}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#ffffff7d}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:55px;height:55px;object-fit:cover;border-radius:50%;display:block}.search_box[_ngcontent-%COMP%]{position:relative;width:80%}@media screen and (max-width: 520px){.search[_ngcontent-%COMP%]{width:100%}}']});let e=c;return e})();export{ht as ChatsMenuComponent};
