import{a as q,b as B}from"./chunk-GER4ALVS.js";import{a as R}from"./chunk-3YEIR67D.js";import"./chunk-MAH65QIO.js";import{D as A,e as L,f as z}from"./chunk-PBIZOYDX.js";import{$a as D,Ab as E,Bb as I,Db as T,Ka as f,Ra as a,Sa as y,Xb as j,Yb as F,_a as c,da as P,db as d,eb as b,fb as s,fc as v,gb as l,hb as h,hc as _,ib as C,jb as M,nb as x,ob as m,rb as S,sb as g,tb as u,vb as w,yb as U,zb as O}from"./chunk-BI7MKFOP.js";import"./chunk-JMZ7DUBM.js";var G=["search"];function H(t,r){t&1&&(s(0,"div",13)(1,"div",14),h(2,"div",15)(3,"div",16),l()())}var Q=t=>["/messenger/chat",t];function N(t,r){if(t&1&&(s(0,"div",18),h(1,"img",19),s(2,"div",20)(3,"h2"),g(4),l(),s(5,"p"),g(6),l()()()),t&2){let o=m().$implicit;c("routerLink",O(5,Q,o.id)),a(1),c("src",o.avatar,f)("alt","avatar "+o.name),a(3),u(o.name),a(2),u(o.bio)}}function J(t,r){if(t&1&&(C(0),d(1,N,7,7,"div",17),M()),t&2){let o=r.$implicit,i=m(2);a(1),c("ngIf",i.tokenUser.id!==o.id)}}function K(t,r){if(t&1&&(s(0,"div",11),d(1,H,4,0,"div",12)(2,J,2,1,"ng-container",10),l()),t&2){let o=m(),i=S(7);a(1),b(1,o.searchData.length==0&&i.value!=""?1:-1),a(1),c("ngForOf",o.searchData)}}function W(t,r){if(t&1&&(s(0,"div",22),h(1,"img",23),s(2,"div")(3,"h3"),g(4),l(),s(5,"p"),g(6),l()()()),t&2){let o=m(),i=o.$implicit,n=o.index,e=m();c("routerLink",O(4,Q,i.id)),a(1),c("src",i.avatar,f),a(3),u(i.name),a(2),u(e.chatsData[n].messages[e.chatsData[n].messages.length-1].message)}}function X(t,r){if(t&1&&(C(0),d(1,W,7,6,"div",21),M()),t&2){let o=r.$implicit;a(1),c("ngIf",o!=null)}}var ce=(()=>{let r=class r{constructor(i){this.reqService=i,this.isOpenedSearchBlock=!1,this.chatsData=[],this.token=localStorage.getItem("token"),this.isOpenedUserDetails=!1,this.userData={avatar:"./assets/images/load/load.jpg",name:"loading name...",email:"loading email...",bio:"loading biography...",l_name:"loading last name..."},this.searchData=[],this.chatUsersData=[]}ngOnInit(){let i={token:this.token};this.reqService.post(_.getUserByToken,i).subscribe(n=>{this.tokenUser=n,this.userData=n}),this.reqService.post(_.getActiveChats,i).subscribe(n=>{n.forEach(e=>{e&&this.chatsData.push(e)}),n.forEach((e,p)=>{e&&e.usersId.forEach(k=>{if(this.userData.id!=k){let $={id:k,token:this.token};this.reqService.post(_.getUserById,$).subscribe(V=>{this.chatUsersData.push(V)})}})})})}searchValue(){let i={name:this.input?.nativeElement.value.split("").filter(n=>n.trim().length).join("")};this.reqService.post(_.search,i).subscribe(n=>{this.searchData=n})}};r.\u0275fac=function(n){return new(n||r)(y(v))},r.\u0275cmp=P({type:r,selectors:[["app-chats-menu"]],viewQuery:function(n,e){if(n&1&&I(G,5),n&2){let p;E(p=T())&&(e.input=p.first)}},standalone:!0,features:[w([v]),U],decls:11,vars:14,consts:[["appResizeHeight","",1,"main-div",3,"size"],[1,"box"],[1,"user_img_box",3,"click"],["alt","user image",3,"src","title"],[3,"userData"],[1,"search_box",3,"mouseleave","click"],["placeholder","Search User","type","text",1,"search",3,"focus","input"],["search",""],["class","search_list_block"],[1,"chat_block"],[4,"ngFor","ngForOf"],[1,"search_list_block"],["class","loading_list"],[1,"loading_list"],[1,"list",2,"margin-top","20px"],[2,"width","50px","height","50px","border-radius","50%","background-color","#2a2a2a"],[2,"margin-left","20px","width","70%","height","20px","border-radius","5px","background-color","#2a2a2a"],["style","margin-top: 20px","class","list",3,"routerLink",4,"ngIf"],[1,"list",2,"margin-top","20px",3,"routerLink"],[3,"src","alt"],[2,"margin-left","20px"],["routerLinkActive","active-chat","class","chat",3,"routerLink",4,"ngIf"],["routerLinkActive","active-chat",1,"chat",3,"routerLink"],["alt","chat",3,"src"]],template:function(n,e){n&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),x("click",function(){return e.isOpenedUserDetails=!e.isOpenedUserDetails}),h(3,"img",3),l(),h(4,"app-user-details",4),s(5,"div",5),x("mouseleave",function(){return e.isOpenedSearchBlock=!1})("click",function(){return e.isOpenedSearchBlock=!0}),s(6,"input",6,7),x("focus",function(){return e.isOpenedSearchBlock=!0})("input",function(){return e.searchValue()}),l(),d(8,K,3,2,"div",8),l()(),s(9,"div",9),d(10,X,2,1,"ng-container",10),l()()),n&2&&(c("size",1),a(3),c("src",e.userData.avatar,f)("title",e.userData.name),a(1),D("left",e.isOpenedUserDetails?"40px":"-7%")("top",e.isOpenedUserDetails?"75px":"-24%")("opacity",e.isOpenedUserDetails?"1":"0")("scale",e.isOpenedUserDetails?"1":"0"),c("userData",e.userData),a(4),b(8,e.isOpenedSearchBlock?8:-1),a(2),c("ngForOf",e.chatUsersData))},dependencies:[R,j,F,L,q,B,A,z],styles:['.main-div[_ngcontent-%COMP%]{background-image:linear-gradient(to left,var(--main-color1),var(--main-color2));overflow-y:scroll;padding:20px;width:100%}.list[_ngcontent-%COMP%]{padding:10px;background-color:#3d3d3d;border-radius:10px;display:flex;align-items:center;border:1px solid rgba(255,255,255,.13)}.search_list_block[_ngcontent-%COMP%]{width:100%;padding:0 20px 20px;box-shadow:#00000012 0 3px 6px,#00000021 0 3px 6px;position:absolute;top:35px;background-color:#232323;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.list[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:50%}.list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#fff}header[_ngcontent-%COMP%]{background-image:linear-gradient(to left,var(--main-color1),var(--main-color2));width:400px}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.side-icon[_ngcontent-%COMP%]{width:30px;height:30px}.search[_ngcontent-%COMP%]{outline:none;color:#fff6;background-color:transparent;border:1px solid;height:15px;font-family:Rubik Glitch,system-ui;font-weight:bolder;border-radius:7px;padding:20px 15px;transition:.3s;box-shadow:#00000012 0 3px 6px,#00000021 0 3px 6px}.search[_ngcontent-%COMP%]:focus{box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px;border-color:#039}app-user-details[_ngcontent-%COMP%]{position:absolute;box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px;top:10px;left:20px;transition:.2s;border-radius:20px;border:1px solid rgba(255,255,255,.09);z-index:999}.user_img_box[_ngcontent-%COMP%]{width:45px;height:45px;margin-right:10px;background-color:#3d3d3d;top:20px;right:20px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;padding:20px;transition:.2s}.user_img_box[_ngcontent-%COMP%]:active{scale:.95}.user_img_box[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:35px;height:35px;object-fit:cover;border-radius:50%}.chat_block[_ngcontent-%COMP%]{margin-top:30px;padding-top:20px;border-top:1px solid rgba(255,255,255,.2)}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%]{width:100%;padding:10px;background:rgba(42,42,42,.59);border-radius:10px;margin-bottom:15px;fill:#fff;display:flex;align-items:center;border:1px solid rgba(255,255,255,.06);transition:.2s scale;outline:none}.active-chat.active-chat.active-chat[_ngcontent-%COMP%]{background:rgb(68,68,68);border:1px solid rgba(255,255,255,.28);scale:1.02}.active-chat.active-chat.active-chat[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:30px;height:30px;background-color:#444;border-top-right-radius:6px;rotate:45deg;right:-10px}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:15px}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff;font-family:Rubik Glitch,system-ui;font-size:25px}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#ffffff7d}.chat_block[_ngcontent-%COMP%] > .chat[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:55px;height:55px;object-fit:cover;border-radius:50%;display:block}.search_box[_ngcontent-%COMP%]{position:relative}@media screen and (max-width: 520px){.search[_ngcontent-%COMP%]{width:100%}.box[_ngcontent-%COMP%]{justify-content:center}}']});let t=r;return t})();export{ce as ChatsMenuComponent};
